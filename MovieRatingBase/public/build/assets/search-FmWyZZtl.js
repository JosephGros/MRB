document.getElementById("search").addEventListener("input",function(){this.value.length>=2?fetch("/search?query=${query}").then(e=>e.json()).then(e=>{n(e)}).catch(e=>console.error("Error",e)):document.getElementById("search-results").innerHTML=""});function n(r){let e=document.getElementById("search-results");e.innerHTML="",r.forEach(s=>{let t=document.createElement("li");t.textContent=s.name,t.classList.add("search-result-item"),t.dataset.resultId=s.id,t.dataset.resultType=entityType,e.appendChild(t)})}document.getElementById("search-results").addEventListener("click",function(r){let e=r.target;if(e&&e.matches("li.search-result-item")){let s=e.dataset.resultType,t=e.dataset.resultId;s==="movies"?window.location.href="/movies/"+t:s==="series"&&(window.location.href="/series/"+t)}});
